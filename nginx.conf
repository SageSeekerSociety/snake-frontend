server {
    # 监听 80 端口
    listen 80;

    # 设置网站的根目录，指向我们从构建阶段复制过来的文件
    root /usr/share/nginx/html;

    # 默认首页文件
    index index.html;

    # 核心配置：处理所有请求
    location / {
        # try_files 会按顺序尝试查找文件:
        # 1. $uri: 查找与请求 URI 完全匹配的文件 (例如 /assets/logo.png)
        # 2. $uri/: 查找与请求 URI 匹配的目录 (例如 /admin/)
        # 3. /index.html: 如果上面都找不到，就返回根目录下的 index.html 文件
        #
        # 这一行是实现前端路由（History模式）的关键。
        # 它确保了所有未匹配到静态资源的请求都由 Vue 应用来接管处理。
        try_files $uri $uri/ /index.html;
    }

    # 可选：为静态资源添加更长的浏览器缓存，提升性能
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public";
    }
}